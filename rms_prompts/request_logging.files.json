{
    "task": "OUTPUT FORMAT (STRICT):\nReturn updated files only, not a diff. For each file, emit:\nBEGIN_FILE <path>\n<full ASCII file content with LF newlines>\nEND_FILE\nNo other text. All files must be under path_prefix. One trailing LF at end of each file.\n\nFILES (EXACT):\n- NEW or REPLACE: backend/logging_utils.py\n- MODIFY ONLY:    backend/main.py\nDo not create, rename, delete, or touch any other files.\n\nFEATURE: Request logging with correlation IDs for FastAPI\n1) backend/logging_utils.py\n   - Use ContextVar[str] to hold per-request correlation ID.\n   - Implement CorrelationIdFilter(logging.Filter) to inject correlation_id into log records.\n   - Provide setup_logging() that idempotently configures logging (ASCII-only, LF) to include correlation_id; no heavy deps.\n   - Implement RequestLoggingMiddleware (starlette BaseHTTPMiddleware): generate UUID, set request.state.correlation_id, log start/end/errors with correlation ID and duration ms; always set X-Correlation-ID response header; gate info-level request logs by env LOG_REQUESTS (default true for {true,1,t,yes}).\n2) backend/main.py (existing file):\n   - Import setup_logging and RequestLoggingMiddleware from backend.logging_utils.\n   - Call setup_logging() immediately after app = FastAPI(...).\n   - Add app.add_middleware(RequestLoggingMiddleware) once (no duplicates).\n   - Do NOT redefine or reassign app; do NOT alter load_dotenv(...) or CORS config; no route/response shape changes.\n\nQUALITY & GUARDS (FILES MODE):\n- ASCII characters only.\n- LF newlines only; exactly one trailing LF at end of each file.\n- Code must import correctly and be syntactically valid.\n- Keep changes minimal and reversible.\n\nACCEPTANCE & VERIFICATION:\nA) Server boots without errors.\nB) GET /health returns 200.\nC) Responses include X-Correlation-ID.\nD) With LOG_REQUESTS=true, logs show start/end lines with the same correlation ID per request; with LOG_REQUESTS=false, correlation ID is still set but info-level request logs are skipped.",
    "repo": "personal-agent-ste",
    "branch": "main",
    "path_prefix": "backend/",
    "k": 6,
    "session": "reqlog_files_optimal"
}