{"table": "repo_chunks", "schema": "public", "columns": [{"name": "id", "default": "nextval('repo_chunks_id_seq'::regclass)", "ordinal": 1, "identity": "NO", "udt_name": "int8", "data_type": "bigint", "is_nullable": false}, {"name": "file_id", "default": null, "ordinal": 2, "identity": "NO", "udt_name": "int8", "data_type": "bigint", "is_nullable": true}, {"name": "chunk_index", "default": null, "ordinal": 3, "identity": "NO", "udt_name": "int4", "data_type": "integer", "is_nullable": true}, {"name": "chunk_sha", "default": null, "ordinal": 4, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": false}, {"name": "content", "default": null, "ordinal": 5, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": false}, {"name": "embedding", "default": null, "ordinal": 6, "identity": "NO", "udt_name": "vector", "data_type": "USER-DEFINED", "is_nullable": true}, {"name": "created_at", "default": "now()", "ordinal": 7, "identity": "NO", "udt_name": "timestamptz", "data_type": "timestamp with time zone", "is_nullable": true}, {"name": "updated_at", "default": "now()", "ordinal": 8, "identity": "NO", "udt_name": "timestamptz", "data_type": "timestamp with time zone", "is_nullable": true}, {"name": "start_line", "default": null, "ordinal": 9, "identity": "NO", "udt_name": "int4", "data_type": "integer", "is_nullable": true}, {"name": "end_line", "default": null, "ordinal": 10, "identity": "NO", "udt_name": "int4", "data_type": "integer", "is_nullable": true}, {"name": "repo", "default": null, "ordinal": 11, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "branch", "default": null, "ordinal": 12, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "path", "default": null, "ordinal": 13, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "file_sha", "default": null, "ordinal": 14, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "commit_sha", "default": "'HEAD'::text", "ordinal": 15, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "repo_name", "default": null, "ordinal": 16, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "embedding_1024", "default": null, "ordinal": 17, "identity": "NO", "udt_name": "vector", "data_type": "USER-DEFINED", "is_nullable": true}, {"name": "head_ref", "default": null, "ordinal": 18, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "dims", "default": "1536", "ordinal": 19, "identity": "NO", "udt_name": "int4", "data_type": "integer", "is_nullable": false}, {"name": "embed_model", "default": null, "ordinal": 20, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "embed_provider", "default": null, "ordinal": 21, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "metadata", "default": "'{}'::jsonb", "ordinal": 22, "identity": "NO", "udt_name": "jsonb", "data_type": "jsonb", "is_nullable": true}, {"name": "lang", "default": null, "ordinal": 23, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "mime", "default": null, "ordinal": 24, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "embedding_1536", "default": null, "ordinal": 25, "identity": "NO", "udt_name": "vector", "data_type": "USER-DEFINED", "is_nullable": true}], "indexes": [{"def": "CREATE INDEX idx_repo_chunks_embedding ON public.repo_chunks USING ivfflat (embedding vector_cosine_ops) WITH (lists='100')", "name": "idx_repo_chunks_embedding"}, {"def": "CREATE INDEX ix_repo_chunks_file ON public.repo_chunks USING btree (file_id)", "name": "ix_repo_chunks_file"}, {"def": "CREATE INDEX ix_repo_chunks_lookup ON public.repo_chunks USING btree (repo, branch, path)", "name": "ix_repo_chunks_lookup"}, {"def": "CREATE INDEX repo_chunks_embedding_1536_ivfflat ON public.repo_chunks USING ivfflat (embedding_1536 vector_cosine_ops) WITH (lists='100')", "name": "repo_chunks_embedding_1536_ivfflat"}, {"def": "CREATE INDEX repo_chunks_embedding_idx ON public.repo_chunks USING hnsw (embedding vector_cosine_ops) WITH (m='16', ef_construction='64')", "name": "repo_chunks_embedding_idx"}, {"def": "CREATE INDEX repo_chunks_embedding_ivfflat ON public.repo_chunks USING ivfflat (embedding vector_cosine_ops) WITH (lists='100')", "name": "repo_chunks_embedding_ivfflat"}, {"def": "CREATE UNIQUE INDEX repo_chunks_pkey ON public.repo_chunks USING btree (id)", "name": "repo_chunks_pkey"}, {"def": "CREATE INDEX repo_chunks_repo_branch_path_idx ON public.repo_chunks USING btree (repo, branch, path)", "name": "repo_chunks_repo_branch_path_idx"}, {"def": "CREATE UNIQUE INDEX ux_repo_chunk ON public.repo_chunks USING btree (chunk_sha)", "name": "ux_repo_chunk"}], "primary_key": ["id"], "foreign_keys": [{"columns": ["file_id"], "ref_table": "repo_files", "constraint": "repo_chunks_file_id_fkey", "ref_schema": "public"}], "rls_policies": [{"cmd": "ALL", "role": ["service_role"], "check": "true", "using": "true", "policy": "Allow all for service_role"}, {"cmd": "SELECT", "role": ["anon"], "check": null, "using": "true", "policy": "read_all"}, {"cmd": "ALL", "role": ["service_role"], "check": "true", "using": "true", "policy": "service-all"}, {"cmd": "ALL", "role": ["service_role"], "check": "true", "using": "true", "policy": "service_role_all"}]}
