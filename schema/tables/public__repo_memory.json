{"table": "repo_memory", "schema": "public", "columns": [{"name": "id", "default": "nextval('repo_memory_id_seq'::regclass)", "ordinal": 1, "identity": "NO", "udt_name": "int8", "data_type": "bigint", "is_nullable": false}, {"name": "repo_name", "default": null, "ordinal": 2, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "branch", "default": null, "ordinal": 3, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": false}, {"name": "commit_sha", "default": "'HEAD'::text", "ordinal": 4, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "path", "default": null, "ordinal": 5, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": false}, {"name": "file_sha", "default": null, "ordinal": 6, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "chunk_sha", "default": null, "ordinal": 7, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": false}, {"name": "start_line", "default": null, "ordinal": 8, "identity": "NO", "udt_name": "int4", "data_type": "integer", "is_nullable": false}, {"name": "end_line", "default": null, "ordinal": 9, "identity": "NO", "udt_name": "int4", "data_type": "integer", "is_nullable": false}, {"name": "content", "default": null, "ordinal": 10, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "embedding", "default": null, "ordinal": 11, "identity": "NO", "udt_name": "vector", "data_type": "USER-DEFINED", "is_nullable": false}, {"name": "created_at", "default": "now()", "ordinal": 12, "identity": "NO", "udt_name": "timestamptz", "data_type": "timestamp with time zone", "is_nullable": false}, {"name": "embedding_1024", "default": null, "ordinal": 13, "identity": "NO", "udt_name": "vector", "data_type": "USER-DEFINED", "is_nullable": true}, {"name": "updated_at", "default": "now()", "ordinal": 14, "identity": "NO", "udt_name": "timestamptz", "data_type": "timestamp with time zone", "is_nullable": true}, {"name": "dims", "default": "1536", "ordinal": 15, "identity": "NO", "udt_name": "int4", "data_type": "integer", "is_nullable": false}, {"name": "embed_model", "default": null, "ordinal": 16, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "embed_provider", "default": null, "ordinal": 17, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "metadata", "default": "'{}'::jsonb", "ordinal": 18, "identity": "NO", "udt_name": "jsonb", "data_type": "jsonb", "is_nullable": true}, {"name": "lang", "default": null, "ordinal": 19, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "mime", "default": null, "ordinal": 20, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "head_ref", "default": "'HEAD'::text", "ordinal": 21, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}, {"name": "repo", "default": null, "ordinal": 22, "identity": "NO", "udt_name": "text", "data_type": "text", "is_nullable": true}], "indexes": [{"def": "CREATE INDEX idx_repo_memory_embed ON public.repo_memory USING ivfflat (embedding vector_cosine_ops) WITH (lists='100')", "name": "idx_repo_memory_embed"}, {"def": "CREATE INDEX idx_repo_memory_path ON public.repo_memory USING btree (repo_name, branch, path)", "name": "idx_repo_memory_path"}, {"def": "CREATE INDEX repo_memory_embedding_1024_hnsw ON public.repo_memory USING hnsw (embedding_1024 vector_cosine_ops)", "name": "repo_memory_embedding_1024_hnsw"}, {"def": "CREATE INDEX repo_memory_embedding_1024_idx ON public.repo_memory USING hnsw (embedding_1024 vector_cosine_ops) WITH (m='16', ef_construction='64')", "name": "repo_memory_embedding_1024_idx"}, {"def": "CREATE INDEX repo_memory_embedding_idx ON public.repo_memory USING hnsw (embedding vector_cosine_ops) WITH (m='16', ef_construction='64')", "name": "repo_memory_embedding_idx"}, {"def": "CREATE UNIQUE INDEX repo_memory_key ON public.repo_memory USING btree (repo, branch, path, chunk_sha)", "name": "repo_memory_key"}, {"def": "CREATE UNIQUE INDEX repo_memory_pkey ON public.repo_memory USING btree (id)", "name": "repo_memory_pkey"}, {"def": "CREATE INDEX repo_memory_repo_branch_created_at_idx ON public.repo_memory USING btree (repo, branch, created_at DESC)", "name": "repo_memory_repo_branch_created_at_idx"}, {"def": "CREATE UNIQUE INDEX repo_memory_repo_branch_path_chunksha_uidx ON public.repo_memory USING btree (repo, branch, path, chunk_sha)", "name": "repo_memory_repo_branch_path_chunksha_uidx"}, {"def": "CREATE INDEX repo_memory_repo_branch_path_idx ON public.repo_memory USING btree (repo, branch, path)", "name": "repo_memory_repo_branch_path_idx"}, {"def": "CREATE UNIQUE INDEX repo_memory_unique ON public.repo_memory USING btree (repo, branch, path, chunk_sha)", "name": "repo_memory_unique"}, {"def": "CREATE UNIQUE INDEX ux_repo_memory ON public.repo_memory USING btree (repo_name, branch, path, chunk_sha, start_line, end_line)", "name": "ux_repo_memory"}, {"def": "CREATE UNIQUE INDEX ux_repo_memory_chunk ON public.repo_memory USING btree (repo_name, commit_sha, path, start_line, end_line, chunk_sha)", "name": "ux_repo_memory_chunk"}], "primary_key": ["id"], "foreign_keys": null, "rls_policies": [{"cmd": "SELECT", "role": ["anon"], "check": null, "using": "true", "policy": "read_all"}, {"cmd": "ALL", "role": ["service_role"], "check": "true", "using": "true", "policy": "service_role_all"}, {"cmd": "DELETE", "role": ["public"], "check": null, "using": "(auth.role() = 'service_role'::text)", "policy": "svc can delete"}, {"cmd": "INSERT", "role": ["public"], "check": "(auth.role() = 'service_role'::text)", "using": null, "policy": "svc can insert"}, {"cmd": "SELECT", "role": ["public"], "check": null, "using": "(auth.role() = 'service_role'::text)", "policy": "svc can select"}, {"cmd": "UPDATE", "role": ["public"], "check": "(auth.role() = 'service_role'::text)", "using": "(auth.role() = 'service_role'::text)", "policy": "svc can update"}]}
